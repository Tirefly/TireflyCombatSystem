# Definition 资产化

# 添加 Attribute Set

# Attribute Clamp 策略化

# Reset Attribute 添加初始值参数

# StateParam_LevelArray 和 StateParam_LevelMap

## LevelArray

```c++
if (LevelValues.IsValidIndex(InLevel))
{
	OutValue = LevelValues[InLevel];
}
else if (InLevel > LevelValues.LastIndex)
{
    OUtValue = LevelValues[LevelValues.LastIndex];
}
else
{
    bool bLocated = false;
    for (int32 i = 0; i < LevelValues.Num(); ++i)
    {
        if (InLevel > i)
        {
            OutValue = OutValue[i];
            bLocated = true;
            break;
        }
    }
    if (!bLocated)
    {
        UE_LOG(Warning);
        return false;
    }
}
```

## LevelMap

```c++
if (const float* Value = LevelValues.Find(InstigatorLevel))
{
	OutValue = *Value;
}
else
{
	TArray<int32> CachedLevels = LevelValues.GetKeys();
    CachedLevels.Sort([](const int32& a, const int32& b){ return a < b; });
    if (InLevel > CachedLevels[CachedLevels.LastIndex])
    {
        OutValue = LevelValues.FindRef(CachedLevels[CachedLevels.LastIndex]);
    }
    else
    {
        bool bLocated = false;
        for (int32 i = 0; i < CachedLevels.LastIndex; ++i)
        {
            if (InLevel > CachedLevels[i])
            {
                OutValue = OutValue[i + 1];
                bLocated = true;
                break;
            }
        }
        if (!bLocated)
        {
            UE_LOG(Warning);
            return false;
        }
    }
}
```

# 验证 StateTickPolicy 的可行性